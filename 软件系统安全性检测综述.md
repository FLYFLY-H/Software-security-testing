**<font size=5><center> 软件系统安全性测试综述</center>**
<br>
**<font size=3>1、软件安全概念和现状以及安全性测试的必要性**<br>
　　随着网络的发展以及移动设备的普及，软件的安全性越发成为我们关注的重点，安全性测试的重要性上升到一个前所未有的高度。部分软件厂商由于安全意识薄弱，且持着侥幸的心理，对软件安全问题置之不理甚至视而不见。许多软件没有经过专业的安全性测试就直接发布在各大平台上，它们携带大量的漏洞直接暴露在公众面前。一旦这些信息被不怀好意者利用，对软件公司的声誉和经济，用户的隐私信息都会造成极大的威胁，甚至产生巨大的损失。<br>
　　目前来说软件安全从面向对象方面主要包括了面向PC的安全和APP安全。面向PC的软件安全尤以面向Windows安全为主。面向Windows的软件安全其实已经是一块相对成熟的技术领域。虽然除了用户、企业和国防之类的机构仍有需求，但是大规模的用户需求已经不存在了。而面向APP即手机应用方向的软件安全还是有较大成长空间的。人们对移动设备的依赖度逐年增加的同时，各种APP安全问题也逐渐暴露出来。由于软件的漏洞而造成损失的案件比比皆是。<br>
　　软件安全还可以分为应用程序级别的安全性和操作系统级别的安全性。应用程序级别的安全性，包括对数据或业务功能的访问，在预期的安全性情况下，操作者只能访问应用程序的特定功能、有限的数据等。操作系统级别的安全性是确保只有具备系统平台访问权限的用户才能访问，包括对系统的登录或远程访问。<br>
　　软件安全问题是广泛而复杂，要完全避免因安全缺陷而造成的各类攻击是不切实际的，每一个新软件总有可能出现完全不符合目前已知模式的安全问题。因此，尽可能的规避已有的安全问题进而减少发生漏洞风险是及其重要的。所以在软件发布之前和运行过程中对软件进行安全测试是延长软件安全周期的重要环节之一。目前来说，大多数公司都提高了安全问题的重视度。大型公司一般都有自己的安全团队负责安全测试，小团队一般委托专门的服务团队做技术支持。<br>
<br>
**<font size=3>2、软件安全性测试的概念**<br>
　　软件安全测试是在IT软件产品的生命周期中，特别是产品开发基本完成到发布阶段，对产品进行检验以验证产品符合安全需求定义和产品质量标准的过程。在软件的生命周期内采取的一系列措施，用来防止出现有违反安全策略的异常情况和在软件的设计、开发、部署、升级以及维护过程中的潜在系统漏洞。<br>
<br>
**<font size=3>3、软件安全性测试与普通测试的区别**<br>
　　安全性测试不同于传统测试类型最大的区别是，它强调软件不应当做什么，而不是软件要做什么。普通测试以发现BUG为目标，安全测试以发现安全隐患为目标。普通测试假设导致问题的数据是用户不小心造成的，接口一般只考虑用户界面。安全测试假设数据是攻击者处心积虑构造的，需要考虑所有可能的攻击途径。安全性测试不仅考虑系统的功能还有系统的机制、外部环境、应用与数据自身安全风险与安全属性等。普通测试以违反功能定义为判断依据。安全测试以违反权限与能力的约束为判断依据。<br>
<br>
**<font size=3>4、软件安全性测试的分类**<br>
　　安全性测试一般可以分为安全功能测试和安全漏洞测试，也可以说成是正向和反向的安全测试。安全功能测试主要从软件的功能出发，也就是从用户角度出发，测试软件的功能是否和当初设定的安全需求一致，在正常使用情况下是否会发生数据泄露、身份认证是否可行、授权服务是否正常等等。安全漏洞测试则是从攻击者角度出发，以发现软件的安全漏洞为目的。尽可能多的找到软件本身在设计、实现、操作和管理上存在的可以被利用的缺陷和弱点，降低软件受攻击的可能性，防止软件进入不安全的状态，保护软件数据的机密性、完整性、可用性，保护身份认证、授权、访问控制等功能。<br>
　　从安全性测试的分类可以看出，安全测试不仅要站在使用者的角度来考虑使用的安全性，还要从攻击者的角度尽可能的找出所有可被利用的漏洞，其实也可以说是攻防的过程，对于安全员的综合实力还是有较高要求的。例如一个登陆系统，若我们输入错误的用户名来尝试登陆时，浏览器上的提示信息为“用户不存在”，当我们尝试正确的用户名而错误的密码时，提示信息变成“密码输入错误”。对于这个错误提示作为普通用户我们会觉得很正常，但若转换角色，以一个攻击者的角度来思考，这就可能是一个攻击点了。攻击者可以根据提示信息，推测出哪些用户名已经存在与系统中，然后利用这些用户名再进行密码的暴力破解，缩小破解的范围。所以在安全性测试中，正向和反向的测试都非常重要，缺一不可。<br>
<br>
**<font size=3>5、软件安全性测试的主要工作**<br>
　　检查软件在面对危险状态时是否会做出合理的防御，防御手段是否符合软件安全需求规格；对软件设计中用于提高安全性而采取的算法、冗余、中断等方案进行针对性测试；对软件进行异常情况模拟测试，看软件是否会因为输入错误或异常而导致软件处于危险状态；用错误的安全性关键操作进行测试，验证系统对这些错误操作的翻反应；对于安全性关键的软件单元和软件部件，要单独进行加强测试，已确认其满足安全性需求；对软件进行模拟入侵测试，检查应用程序对非法侵入的防范能力。针对不同的安全指标，安全性测试的策略也不同。值得注意的是，安全性测试并不是用来证明该软件是否安全，而是用于验证其使用的安全策略是否是有效的，是否能抵抗一定的恶意攻击并使程序能正常运行。<br>
<Br>
**<font size=3>6、软件安全性测试的目标**<br>
　　一般来说安全性测试的初级目标是其是否能对内存溢出、SQL注入、XSS攻击和各种输入验证问题有一定的抵抗能力，高级一些的目标是其对访问控制、信息泄露、不充分的随机数和加密身份认证等功能进行防御检测。值得注意的是，安全性测试并不是用来证明该软件是否安全，而是用于验证其使用的安全策略是否是有效的，是否能抵抗一定的恶意攻击并使程序能正常运行。<br>
<br>
**<font size=3>7、软件安全性测试融合到软件生命周期中**<br>
　　对于重视安全性的软件厂商，应当将安全性检测整合到整个软件开发生命周期中。在初始的项目设计阶段，就应该进行安全分析，尽可能规避掉因为不合理的设计而产生的安全威胁，将威胁苗条在没有生长之前遏制掉。代码初始设计完成后，也应当对代码进行单元性安全测试，检查各单元级代码是否有安全威胁。将所有代码整合后再对代码进行集成测试，在整个代码上检查其安全性。代码级别的漏洞是最底层的，也是大部分安全威胁的来源。在项目计入验收阶段时，仍要对代码进行安全性测试。尝试运行时，对其可能会存在的漏洞风险进行检测。必须对软件进行检测后才能发布在平台上，这不仅是对用户负责也是对公司本身负责，一旦因为安全问题而导致数据泄露对用户和公司都可能造成不可磨灭的伤害。<br>
<Br>
**<font size=3>8、软件安全性测试的方法学**<Br>
　　软件安全性测试的方法学主要可以分为白盒测试、黑盒测试和灰盒测试。"白盒"法全面了解程序内部逻辑结构、对所有逻辑路径进行测试。"白盒"法是穷举路径测试。在使用这一方案时，测试者必须检查程序的内部结构，从检查程序的逻辑着手，得出测试数据。贯穿程序的独立路径数是天文数字。黑盒测试也称功能测试，它是通过测试来检测每个功能是否都能正常使用。在测试中，把程序看作一个不能打开的黑盒子，在完全不考虑程序内部结构和内部特性的情况下，在程序接口进行测试，它只检查程序功能是否按照需求规格说明书的规定正常使用，程序是否能适当地接收输入数据而产生正确的输出信息。黑盒测试着眼于程序外部结构，不考虑内部逻辑结构，主要针对软件界面和软件功能进行测试。黑盒测试是以用户的角度，从输入数据与输出数据的对应关系出发进行测试的。很明显，如果外部特性本身设计有问题或规格说明的规定有误，用黑盒测试方法是发现不了的。灰盒测试，是介于白盒测试与黑盒测试之间的一种测试，灰盒测试多用于集成测试阶段，不仅关注输出、输入的正确性，同时也关注程序内部的情况。灰盒测试不像白盒那样详细、完整，但又比黑盒测试更关注程序的内部逻辑，常常是通过一些表征性的现象、事件、标志来判断内部的运行状态。<br>
　　基于这三种方法学知识，衍生出白/灰盒测试、功能验证、漏洞扫描、模拟攻击等具体的方法。白/灰盒测试是对代码进行静态分析/审核。功能验证是采用黑盒测试的方法站在用户角度来验证功能是否完备。漏洞扫描是借助特定的漏洞扫描器，对软件进行漏洞扫描。模拟攻击是用特殊的数据来模拟攻击者对软件的攻击，验证软件的防护能力，例如Fuzzing使用大量半有效的数据作为输入，以程序是否出现异常来发现程序是否存在安全漏洞。下面的文章来介绍我们现在常用的安全性测试方法。<br>
<br>
**<font size=3>9、软件安全性测试的方法**<Br>
- **静态分析检测**<br>
　　程序静态分析是指在不运行代码的方式下，通过词法分析、语法分析、控制流、数据流分析等技术对程序代码进行扫描，验证代码是否满足规范性、安全性、可靠性、可维护性等指标的一种代码分析技术。目前静态分析技术向模拟执行的技术发展以能够发现更多传统意义上动态测试才能发现的缺陷，例如符号执行、抽象解释、值依赖分析等等并采用数学约束求解工具进行路径约减或者可达性分析以减少误报增加效率。目前的静态分析工具，无论从科研角度还是实用性角度还有很大的提高余地，国际最好分析工具误报率在5-10%之间，能够报出的缺陷种类也仅有几百种。我国较好静态分析工具较少，一些高校正在致力于在此方面的研究和开发（成果较突出的如北京大学等）。<br>
　　相较于动态分析或运行时进行测试来说，静态分析能在开发阶段就能探测出存在的漏洞而不是在运行时漏洞被利用了才亡羊补牢。并且静态分析能找到许多动态分析工具无法找到的漏洞。但是绝对的依赖静态分析这种心态时很危险的，要知道静态分析虽然有其优势但他的缺点还是很明显的。《用静态分析方法确保编程安全》的作者Brian Chess和Jacob West在书中谈到“一半的安全问题都源自软件的设计，而非源码。”所以，只在代码级别找出漏洞是非常不全面的，绝对不要认为在应用前对软件进行静态分析就能得到一份安全度100分的软件。<br>
　　目前基于各种语言的静态分析工都有较为成熟的发展。Klockwork是国内用的最为广泛的静态分析工具，由加拿大北电于1996年研发，是中国最早的能够检测语义缺陷的静态分析工具。截止到2015年其版本号为V10,也就是大家常说的K10。LDRA Testbed是英国的编码规则类检测工具，能够支持C/C++数千种条目的规则检测，是最早进入中国市场的静态分析工具，在军队、军工广泛使用，但其技术仅支持风格类检测，无法进行语义缺陷分析，导致一些常用的运行时缺陷无法发现或者较高误漏报，由此市场占有率逐步下降。Cobot是北京大学软件工程中心研发的静态分析工具，支持C/C+数千条规则和缺陷的检测，是我国唯一可以称得上是静态分析产品的商业化工具。2015年通过美国CWE-Compatible 认证，是中国首个也是唯一一个通过该认证的安全检测产品。
- **静态分析检测**<br>
　　与静态分析检测相反，是指通过运行被测程序，检查运行结果与预期结果的差异，并分析运行效率、正确性和健壮性等性能。这种方法由三部分组成：构造测试用例、执行程序、分析程序的输出结果。<br>
　　动态测试可分为三个步骤：单元测试、集成测试和系统测试以及验收测试和回归测试。单元测试是对软件中的基本组成单位进行测试，其目的是检验软件基本组成单位的正确性。在公司的质量控制体系中，单元测试由产品组在软件提交测试部前完成。单元测试是白盒测试。集成测试是在软件系统集成过程中所进行的测试，其主要目的是检查软件单位之间的接口是否正确。在实际工作中，我们把集成测试分为若干次的组装测试和确认测试。系统测试是对已经集成好的软件系统进行彻底的测试，以验证软件系统的正确性和性能等满足其规约所指定的要求。验收测试是在软件投入使用之前的最后测试。是购买者对软件的试用过程。在公司实际工作中，通常是采用请客户试用或发布Beta版软件来实现。验收测试是黑盒测试。回归测试即软件维护阶段，是为了验收测试结果进行验证和修改。<Br>
　　动态测试可以识别运行时环境中的漏洞，允许分析我们无法访问源代码的应用程序。但它也有限制，自动化工具提供了一种错误的安全感，无法保证源代码的完整测试覆盖率，会产生误报和漏报。
- **基于模型的安全测试**<Br>
　　基于模型的安全测试是对软件的结构进行建模，生成相应的测试模型，再有测试模型自动生成测试用例，一个好的测试用例不仅要为被测系统（ SUT ）提供一些输入，还要验证系统是否如预期进行。<br>
　　近年来，基于模型的软件测试技术得到快速发展，大量的软件测试模型被研制出来，以便自动化的检测出软件中存在的安全隐患。相较于其它的测试技术，基于模型的软件测试有更高的自动化程度和效率，对万行的VC程序的故障检测秩序两分钟。并且还能检测出其它测试手段不能发现的漏洞。常用的软件测试模型有有限状态自动机、UML模型、马尔可夫链等。<br>
　　统一建模语言UML使第三代用于为面向对象开发的软件产品进行说明、可视化和编制文档的方法。UML适用于系统开发的不同阶段，从需求规格描述直至系统维护。UML作为建模语言事实上的标准，今年来被学术界和工业界广泛的用于软件系统建模。从测试角度看，这些模型是获取系统结构和行为信息的来源，因而使测试用例生成的理想基础。使用UML模型进行检测首先安全威胁被以UML序列图的形式进行建模，然后以此模型为基础提取出威胁路径的集合。最后使用随机生成的测试用例来执行代码，执行的路径被收集起来，并于定义好的威胁路径进行比较。<Br>
- **基于故障注入的检测**<br>
　　故障注入技术使一种按照特定的故障模型、认为的创造故障并注入目标系统中，用以加速该目标系统谷中的发生的测试技术，通过这种技术，可以模拟目标系统在实际运行环境中可能发生的各种故障，让系统带着这些故障运行，然后通过对目标系统的运行情况和系统行为进行观察、记录和分析确定系统故障测试覆盖率，验证容错系统中的容错机制的正确性和有效性，为完善和改善系统安全可靠功能提供信息反馈，最后通过所得的反馈信息对目标系统进行验证和评价。<br>
　　目前国内外常用的故障诸如技术可以分为两大类：基于模拟的故障注入和基于原型的故障注入。模拟故障注入首先需要建立一个目标系统的模拟模型，例如使用硬件描述语言，然后在模拟模型中增加故障单元来实现故障注入机制。基于模拟的故障注入方式按照应用层次可分为晶体管级、逻辑级以及功能级三种，典型的基于模拟的故障注入工具有VERIFY、MEFISTO-C等。对基于原型的故障注入通常根据具体测试手段的不同进行进一步划分，可分为物理实现、硬件实现和软件实现。物理实现主要使采用特定的物理手段对目标系统施加影响，常用的使采用非接触式故障注入；硬件实施的故障注入利用特殊的设备或者工具直接连接到目标系统上进行故障注入；软件实现的故障注入根据某种故障模型通过修改存储器或者寄存器内容来模拟软件或者硬件的故障发生。目前比较成熟的软件故障注入技术有FIAT、FERRARI、Xception等。<br>
- **基于语法的安全性检测**<br>
　　在语法检测中，我们称软件的输入为“测试情况”，它是基于软件接口使用的语言规范而建立的。接口语言定义了什么使接口的合法输入，语法检测产生的原因就在于每个接口都使用一种公开或未公开的语言进行通信传输，而我们可以对这个接口语言进行有效的测试。<br>
　　语法检测需要一个及其易读形式的针对输入语言的描述，如果该语言是未公开的，检测者必须为它建立一个规范，例如一个句子可看作使一种由语言规则决定的字节序列。在语法检测中，我们使用无关联语言产生语句，然后将这些语句输入到被测软件中，从而检测语句能否被软件接受。<br>
　　语法检测中“测试情况”的选择可以从单个错误语句开始，假设漏洞使相互独立的并且每个漏洞由一个语句中的一个错误触发，当所有含有一个错误的语句试过之后。开始测试分别含有两个错误、三个错误的语句等。“测试情况”的数量随着联合的错误数量的增加而成指数增长。根据语法检测中错误形成的原因，我们将错误归结为一下几种类型：句法错误、分隔符错误、区间值错误、前后关联错误、状态依赖错误。<br>
- **模糊测试**<br>
　　模糊测试是一种通过向目标系统提供非预期的输入并监视异常结果来发现软件漏洞的方法。主要是通过输入大量数据，发现程序中存在的问题。可以通过使程序某些内容溢出出现异常，或者输入的是程序规定的范围内的数据结果出现异常，从而找出程序的bug。模糊测试的实现是一个非常简单的过程：1、准备一份插入程序中的正确的文件。2、用随机数据替换该文件的某些部分。3、用程序打开文件。4、观察破坏了什么。可以用任意多种方式改变该随机数据。例如，可以将整个文件打乱，而不是仅替换其中的一部分，也可以将该文件限制为 ASCII 文本或非零字节。不管用什么方式进行分割，关键是将大量随机数据放入应用程序并观察出故障的是什么。
- **基于故障树的安全监测**<br>
　　故障树分析法主要用于分析大型复杂系统的可靠性及安全性，它被公认为是目前对复杂系统可靠性、安全性进行定性分析的一种有效方法。在建立故障树模型之前，要对规格需求说明书进行详细的分析，通过功能危险性分析技术（ＦＨＡ）找出系统中所有可能出现的各种不安全状态（或者关键失效状态），列出软件关键安全故障事件表。然后对表中每一个故障事件建立一棵故障树。
- **渗透测试**<Br>
　　渗透测试是通过模拟恶意黑客的攻击方法，来评估计算机网络系统安全的一种评估方法。这个过程包括对系统的任何弱点、技术缺陷或漏洞的主动分析，这个分析是从一个攻击者可能存在的位置来进行的，并且从这个位置有条件主动利用安全漏洞。换句话来说，渗透测试是指渗透人员在不同的位置（比如从内网、从外网等位置）利用各种手段对某个特定网络进行测试，以期发现和挖掘系统中存在的漏洞，然后输出渗透测试报告，并提交给网络所有者。网络所有者根据渗透人员提供的渗透测试报告，可以清晰知晓系统中存在的安全隐患和问题。<br>
　　渗透测试还具有的两个显著特点是：渗透测试是一个渐进的并且逐步深入的过程。渗透测试是选择不影响业务系统正常运行的攻击方法进行的测试。<br>
　　作为网络安全防范的一种新技术，对于网络安全组织具有实际应用价值。但要找到一家合适的公司实施渗透测试并不容易。<br>
　　根据渗透的目标不同，可以分为主机操作系统渗透、数据库系统渗透、应用系统渗透和网络设备渗透。<br>

**<font size=3>10、软件安全测试注意事项**<Br>
　　做好软件安全测试有三个要点：一是充分了解软件漏洞，二是评估安全风险，三是拥有高效的软件安全测试技术和工具。只有对软件漏洞的原理和例子充分熟悉，才能对未知的漏洞有更好的洞察能力和评估能力，扎实的知识是安全测试人员的基础。如何评估安全风险是安全测试的重点，对于检测出的威胁，如何评估其危险避免小题大做或者是忽略了一些会造成重大威胁的细节。在自动化的今天，如何使用软件安全测试工具实现高效、高正确度、高自动化的检测是提高安全测试的方法之一。<br>
　　软件安全测试要想方设法保护最易攻击的环节，要对最薄弱环节进行安全测试。要偶纵深防御的能力，使用多重防御策略来测试软件，以至少有一层防御将会完全阻止黑客破坏。还要对向后兼容的软件额外注意，比如有些软件的原版不使用加密技术，但是在升级的版本中却向后兼容了老版本，这就是黑客非常容易击破软件。对软件的访问权限也需注意，要遵循最小特权原则规定，确定只授予执行操作所必需的最少访问权，并且对于该访问权只准许使用所需的最少时间，防止用户滥用与那个访问权相关的特权。同时我们要尽可能将系统分成多个独立单元，将对系统可能造成的伤害降到最低。<br>
　　最后要注意，安全性测试在本质上其实和攻击者的攻击手段是一样的，但最后我们的目标是扎到软件中存在的安全隐患提出安全报告修复漏洞，绝对不是去利用漏洞做违法乱纪的事情。作为安全人员，我们要遵守本心，以法律为纲。在做网络测试的时候，很多时候我们其实是踩在了法律的边缘，所以我们自身一定要提高法律意识，多了解法律法规，避免因为自己的误操作而踏入禁地。<br>
<Br>
**<font size=3>11、总结**<Br>
　　在互联网持续高速发展的今天，安全已经是我们不可忽视的一个重要环节，要向持续有效健康的发展，就必须将安全融入到研发的各个环节中。企业对软件的依赖，以及越来越多地使用开源组件来开发软件，也推动了对软件安全测试的需求。开源组织遍布整个阻止，访问各种类型的敏感数据的行为也增加，数据泄露和易受攻击代码被利用的风险也大大增加，安全问题绝不可能是一个我们可以忽略的问题了。但现如今还是缺少综合实力较高的安全人员。对于一个安全员来说，各方面的技术知识是基础，但是只有知识是不够的，多方面经验的积累也是非常重要的，任何事情都不可以局限于纸上谈兵。并且对于在法律边缘的操作来说，对安全人员的法律意识也是有很高要求的，切莫越过违法乱纪的界限。<br>



